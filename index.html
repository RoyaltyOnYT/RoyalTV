<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>RoyalTV — Early Access</title>
<style>
  body { margin:0; background:#0b0f19; color:#e4e8f0; font-family:Arial,sans-serif; }
  header { display:flex; justify-content:space-between; align-items:center; padding:10px 20px; background:#131826; }
  .logo-placeholder { width:50px; height:50px; background:linear-gradient(135deg,#5865f2,#8a2be2); border-radius:8px; display:flex; align-items:center; justify-content:center; font-weight:bold; color:#fff; font-size:20px; }
  header h1 { margin:0; font-size:24px; color:#fff; }
  button { padding:10px 16px; background:#5865f2; border:none; color:#fff; border-radius:6px; cursor:pointer; margin:5px; }
  button:hover { background:#4750c4; }
  .center { max-width:900px; margin:40px auto; padding:0 20px; }
  .hidden { display:none; }
  .box { background:#131826; padding:20px; border-radius:8px; margin-bottom:20px; }
  input { width:100%; padding:8px; margin:8px 0; border-radius:4px; border:1px solid #333; background:#0f141e; color:#eee; }
  .video-gallery { display:grid; grid-template-columns:1fr 1fr; gap:20px; margin-top:20px; }
  .video-card { background:#1b1f30; border-radius:12px; padding:12px; text-align:center; }
  .video-card video { width:100%; height:auto; border-radius:8px; }
</style>
</head>
<body>

<header>
  <div class="logo-placeholder">R</div>
  <h1>RoyalTV</h1>
  <button onclick="window.open('https://www.paypal.com/donate','_blank')">Donate</button>
</header>

<div class="center">

  <!-- Fan Login -->
  <div id="loginSection" class="box">
    <h3>Login Account</h3>
    <input type="password" id="fanPass" placeholder="Fan Password…">
    <button onclick="login('fan')">Login as Fan</button>
    <button style="font-size:12px;" onclick="showDevLogin()">Developer? Login with code</button>
    <div id="loginError" style="color:#f88"></div>
  </div>

  <!-- Developer Login -->
  <div id="devLoginSection" class="box hidden">
    <h3>Developer Login</h3>
    <input type="password" id="devPass" placeholder="Developer Password…">
    <button onclick="login('dev')">Login as Developer</button>
    <div id="devError" style="color:#f88"></div>
  </div>

  <!-- Video Gallery -->
  <div id="content" class="hidden">
    <div class="video-gallery" id="videoGallery"></div>
  </div>

  <!-- Developer Upload -->
  <div id="devDashboard" class="box hidden">
    <h3>Upload Video (MP4)</h3>
    <input type="file" id="uploadVideo" accept="video/*">
    <button onclick="uploadVideoFile()">Upload to Cloud</button>
    <div id="uploadStatus"></div>
  </div>

</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-storage-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "YOUR_FIREBASE_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  projectId: "YOUR_PROJECT_ID",
  storageBucket: "YOUR_PROJECT_ID.appspot.com",
};

function showDevLogin() {
  document.getElementById('devLoginSection').classList.remove('hidden');
  window.scrollTo({top: document.getElementById('devLoginSection').offsetTop, behavior: 'smooth'});
}

function login(role) {
  const fanPass = document.getElementById('fanPass').value;
  const devPass = document.getElementById('devPass').value;
  if(role==='fan' && fanPass==='RoyalGroup') {
    startSession('fan');
  } else if(role==='dev' && devPass==='Keiraniscool') {
    startSession('dev');
  } else {
    const err = (role==='fan') ? 'loginError' : 'devError';
    document.getElementById(err).textContent = 'Wrong password.';
  }
}

function startSession(role) {
  sessionStorage.setItem('role', role);
  document.getElementById('loginSection').classList.add('hidden');
  document.getElementById('devLoginSection').classList.add('hidden');
  document.getElementById('content').classList.remove('hidden');
  if(role==='dev') {
    document.getElementById('devDashboard').classList.remove('hidden');
  }
  loadVideos();
}

async function uploadVideoFile() {
  const input = document.getElementById('uploadVideo');
  const file = input.files[0];
  if(!file) return alert('Select a video file first.');
  const storageRef = storage.ref('videos/' + file.name);
  const uploadTask = storageRef.put(file);
  uploadTask.on('state_changed', 
    (snapshot) => {
      const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
      document.getElementById('uploadStatus').textContent = 'Uploading: ' + Math.round(progress) + '%';
    }, 
    (err) => { console.error(err); alert('Upload failed'); }, 
    async () => {
      const url = await uploadTask.snapshot.ref.getDownloadURL();
      saveVideoUrl(url);
      alert('Upload complete!');
      loadVideos();
    }
  );
}

function saveVideoUrl(url) {
  const arr = JSON.parse(localStorage.getItem('videoUrls') || '[]');
  arr.push(url);
  localStorage.setItem('videoUrls', JSON.stringify(arr));
}

function loadVideos() {
  const gallery = document.getElementById('videoGallery');
  gallery.innerHTML = '';
  const urls = JSON.parse(localStorage.getItem('videoUrls') || '[]');
  urls.forEach((u,i) => {
    const card = document.createElement('div');
    card.className = 'video-card';
    card.innerHTML = `<h3>Video #${i+1}</h3><video controls src="${u}"></video>`;
    gallery.appendChild(card);
  });
}

// Restore session
window.onload = () => {
  const role = sessionStorage.getItem('role');
  if(role) startSession(role);
}
</script>

</body>
</html>
